<!DOCTYPE html>
<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script type="text/javascript">
            function loadSymptoms() {
                $.ajax({
                    type: 'GET',
                    url: '/api/symptoms',
                    success: function (jsonData) {
                        var container = document.getElementById("symptomContainer");
                        var data = JSON.parse(jsonData);
                        console.log(data.symptoms)
                        for (var i = 0; i < data.symptoms.length; i++) {
                            var inputTag = document.createElement('input');
                            inputTag.type = 'checkbox';
                            inputTag.value = i;
                            inputTag.classList = ['symptoms']

                            var labelTag = document.createElement('label');
                            labelTag.textContent = data.symptoms[i];

                            var lineBreak = document.createElement('br');

                            container.appendChild(inputTag);
                            container.appendChild(labelTag);
							// container.appendChild(lineBreak);
							//document.getElementsByTagName("h1").style.fontFamily = "Impact,Charcoal,sans-serif";
                            var css = `body{
							background-color:#bbf8e3;
							font-family:Roboto,sans-serif;
						}
						.symptoms { padding:10px; margin:10px; }
						label{margin:10px;font-size:20px;}
						h1{
							text-align:center;
						}
						button{
							margin:10px;
							border-radius:3px;
							height:40px;
							border-style:none;
   						 	background-color: #8ac5b1;
    						color:black;
						}
						input[type=text]{
							margin:20px;
							padding:10px;
						}
						`,
                                head = document.head || document.getElementsByTagName('head')[0],
                                style = document.createElement('style');
                            head.appendChild(style);

                            style.type = 'text/css';
                            if (style.styleSheet) {
                                style.styleSheet.cssText = css;
                            } else {
                                style.appendChild(document.createTextNode(css));
                            }
                        }
                    }

                })
            }
            function getDisease() {
                console.log("reached");
                console.log($("#result"));
                var symptoms = document.getElementsByClassName('symptoms');
                console.log(symptoms);
                var arr = [];
                var cb;
                for (var i = 0; i < symptoms.length; i++) {
                    cb = symptoms[i].checked ? 1 : 0;
                    arr.push(cb);
                }
                console.log(arr);
                $.ajax({
                    type: 'POST',
                    url: '/api/disease',
                    data: JSON.stringify(
                        {name: "Something", symptoms: arr}
                    ),
                    contentType: 'application/json',
                    success: function (data) {
                        document.getElementById("result").value = data;
                    }

                })
            }
        </script>
    </head>

    <body onload="loadSymptoms()">

<body onload="loadSymptoms()">
	<p>Hy hello my name is Utkarsh Akhouri</p>
        <h1>Hello "NAME"</h1>

        <div id="symptomContainer"></div>

	</div>

	<input type="checkbox" id="check" val="symptom 1">
	<label>symptom1</label>
	<button onclick="getDisease()">Submit</button>
	<input type="text" disabled="true" id="result"></input>
</body>

</html>
        <!--<input type="checkbox" id="check" val="symptom 1">
                                        	<label>symptom1</label>-->
        <button onclick="getDisease()">Submit</button>
        <input type="text" disabled="true" id="result"></body>
</html>
